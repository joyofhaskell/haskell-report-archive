
<title>Haskell 1.4 Lexical Structure</title>
<body bgcolor="#ffffff"> <i>The Haskell 1.4 Report</i><br> <a href="index.html">top</a> | <a href="intro.html">back</a> | <a href="exps.html">next</a> | <a href="index14.html">contents</a> | <a href="prelude-index.html">function index</a> <br><hr>
<a name="lexical-structure"></a><a name="sect2"></a>
<h2>2<tt>&nbsp;&nbsp;</tt>Lexical Structure</h2>
<p>

In this section, 
we describe the low-level lexical structure of Haskell .
Most of the details may be skipped in a first reading of
the report.<a name="notational-conventions"></a><p>
<a name="sect2.1"></a>
<h3>2.1<tt>&nbsp;&nbsp;</tt>Notational Conventions</h3>
<p>
These notational conventions are used for presenting syntax:<p>
<p>
<table >
<tr><td align=center>
<I>[pattern]</I>		</td><td> optional </td></tr><tr><td align=center><I>{pattern}</I>		</td><td> zero or more repetitions </td></tr><tr><td align=center><I>(pattern)</I>		</td><td> grouping </td></tr><tr><td align=center><I>pat</I><sub><I>1</I></sub><I> | pat</I><sub><I>2</I></sub>		</td><td> choice </td></tr><tr><td align=center><I>pat</I><sub><I>&lt;pat'&gt;</I></sub>	</td><td> difference---elements generated by <I>pat</I> </td></tr><tr><td align=center></td><td> except those generated by <I>pat'</I> </td></tr><tr><td align=center><tt>fibonacci</tt>		</td><td> terminal syntax in typewriter font
</td></tr></table>
<p>
<p>
Because the syntax in this section describes <I>lexical</I> syntax, all
whitespace is expressed explicitly; there is no
implicit space between juxtaposed symbols.  BNF-like syntax is used
throughout, with productions having the form:
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
nonterm </td><td width=20>  <tt>-&gt;</tt> </td><td width=250> alt<sub>1</sub> | alt<sub>2</sub> | ... | alt<sub>n</sub>
</td></tr></table>
<p>
Care must be taken in distinguishing metalogical syntax such as <I>|
</I>and <I>[...]</I> from concrete terminal syntax (given in typewriter font)
such as <tt>|</tt> and <tt>[...]</tt>, although usually the context makes the
distinction clear.<p>
Haskell  uses the Unicode[<a href="haskell.html#$unicode">10</a>]  character set.

However, source 
programs are currently biased toward the ASCII character set
 used in earlier versions of Haskell .<p>
Haskell uses a pre-processor to convert non-Unicode character sets into
Unicode.  This pre-processor converts all characters to Unicode and
uses the escape sequence <tt>\u</tt><I>hhhh</I>, where the <tt>"h"</tt> are hex digits,
to denote escaped unicode characters.  Since this translation occurs
before the program is compiled, escaped Unicode characters may appear in
identifiers and any other place in the program.<p>
This syntax depends on properties of the Unicode characters as defined
by the Unicode consortium. 
Haskell  compilers are expected to make use of
new versions of Unicode as they are made available.<a name="lexemes"></a><p>
<a name="sect2.2"></a>
<h3>2.2<tt>&nbsp;&nbsp;</tt>Lexical Program Structure</h3>
<a name="whitespace"></a>
<p>
<table cellspacing=0 cellspacing=0>
<tr><td width=100></td><td width=20></td><td width=250></td></tr><tr></tr><tr></tr><tr></tr><tr><td>
program </td><td>  <tt>-&gt;</tt> </td><td> {lexeme | whitespace }
</td></tr><tr><td>
lexeme </td><td>  <tt>-&gt;</tt> </td><td> varid | conid | varsym | consym | literal | special | reservedop | reservedid
</td></tr><tr><td>
literal </td><td>  <tt>-&gt;</tt> </td><td> integer | float | char | string
</td></tr><tr><td>
special </td><td>  <tt>-&gt;</tt> </td><td> <tt>(</tt> | <tt>)</tt> | <tt>,</tt> | <tt>;</tt> | <tt>[</tt> | <tt>]</tt> | <tt>_</tt> | `| <tt>{</tt> | <tt>}
</tt></td></tr><tr><td>
whitespace </td><td>  <tt>-&gt;</tt> </td><td> whitestuff {whitestuff}
</td></tr><tr><td>
whitestuff </td><td>  <tt>-&gt;</tt> </td><td> whitechar | comment | ncomment
</td></tr><tr><td>
whitechar </td><td>  <tt>-&gt;</tt> </td><td> newline | return | linefeed | vertab | formfeed
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td> space | tab | UNIwhite
</td></tr><tr><td>
newline </td><td>  <tt>-&gt;</tt> </td><td> a newline (system dependent)
</td></tr><tr><td>
return </td><td>  <tt>-&gt;</tt> </td><td> a carriage return
</td></tr><tr><td>
linefeed </td><td>  <tt>-&gt;</tt> </td><td> a line feed
</td></tr><tr><td>
space </td><td>  <tt>-&gt;</tt> </td><td> a space
</td></tr><tr><td>
tab </td><td>  <tt>-&gt;</tt> </td><td> a horizontal tab
</td></tr><tr><td>
vertab </td><td>  <tt>-&gt;</tt> </td><td> a vertical tab
</td></tr><tr><td>
formfeed </td><td>  <tt>-&gt;</tt> </td><td> a form feed
</td></tr><tr><td>
uniWhite </td><td>  <tt>-&gt;</tt> </td><td> any UNIcode character defined as whitespace
</td></tr><tr><td>
comment </td><td>  <tt>-&gt;</tt> </td><td> <tt>--</tt> {any}newline
</td></tr><tr><td>
ncomment </td><td>  <tt>-&gt;</tt> </td><td> <tt>{-</tt> ANYseq {ncomment ANYseq}<tt>-}
</tt></td></tr><tr><td>
ANYseq </td><td>  <tt>-&gt;</tt> </td><td> {ANY}<sub>&lt;{ANY}( <tt>{-</tt> | <tt>-}</tt> ) {ANY}&gt;</sub>
</td></tr><tr><td>
ANY </td><td>  <tt>-&gt;</tt> </td><td> any | newline | vertab | formfeed
</td></tr><tr><td>
any </td><td>  <tt>-&gt;</tt> </td><td> graphic | space | tab | nonbrkspc
</td></tr><tr><td>
graphic </td><td>  <tt>-&gt;</tt> </td><td> large | small | digit | symbol | special | <tt>:</tt> | <tt>"</tt> | <tt>'
</tt></td></tr><tr><td>
small </td><td>  <tt>-&gt;</tt> </td><td> ASCsmall | UNIsmall
</td></tr><tr><td>
ASCsmall </td><td>  <tt>-&gt;</tt> </td><td> <tt>a</tt> | <tt>b</tt> | ... | <tt>z
</tt></td></tr><tr><td>
UNIsmall </td><td>  <tt>-&gt;</tt> </td><td> any Unicode lowercase letter
</td></tr><tr><td>
large </td><td>  <tt>-&gt;</tt> </td><td> ASClarge | UNIlarge
</td></tr><tr><td>
ASClarge </td><td>  <tt>-&gt;</tt> </td><td> <tt>A</tt> | <tt>B</tt> | ... | <tt>Z
</tt></td></tr><tr><td>
UNIlarge </td><td>  <tt>-&gt;</tt> </td><td> any uppercase or titlecase Unicode letter
</td></tr><tr><td>
symbol </td><td>  <tt>-&gt;</tt> </td><td> ASCsymbol | UNIsymbol
</td></tr><tr><td>
ASCsymbol </td><td>  <tt>-&gt;</tt> </td><td> <tt>!</tt> | <tt>#</tt> | <tt>$</tt> | <tt>%</tt> | <tt>&amp;</tt> | <tt>*</tt> | <tt>+</tt> | <tt>.</tt> | <tt>/</tt> | <tt>&lt;</tt> | <tt>=</tt> | <tt>&gt;</tt> | <tt>?</tt> | @
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td>  <tt>\</tt> | <tt>^</tt> | <tt>|</tt> | <tt>-</tt> | <tt>~
</tt></td></tr><tr><td>
UNIsymbol </td><td>  <tt>-&gt;</tt> </td><td> Any Unicode symbol or punctuation
</td></tr><tr><td>
digit </td><td>  <tt>-&gt;</tt> </td><td> <tt>0</tt> | <tt>1</tt> | ... | <tt>9
</tt></td></tr><tr><td>
udigit </td><td>  <tt>-&gt;</tt> </td><td> digit | UNIdigit
</td></tr><tr><td>
UNIdigit </td><td>  <tt>-&gt;</tt> </td><td> A Unicode numberic
</td></tr><tr><td>
octit </td><td>  <tt>-&gt;</tt> </td><td> <tt>0</tt> | <tt>1</tt> | ... | <tt>7
</tt></td></tr><tr><td>
hexit </td><td>  <tt>-&gt;</tt> </td><td> digit | <tt>A</tt> | ... | <tt>F</tt> | <tt>a</tt> | ... | <tt>f
</tt></td></tr></table>
<p>
Characters not in the category <I>ANY</I> are not valid
in Haskell  programs and should result in a lexing error.
Comments are valid whitespace.  An ordinary
comment begins with two consecutive
dashes (<tt>--</tt>) and extends to the following newline.
A nested
comment begins with <tt>{-</tt> and ends with
<tt>-}</tt>; it can be between any two lexemes.
All character sequences not containing <tt>{-</tt> nor <tt>-}
</tt>are ignored within a nested comment.
Nested comments may be
nested to any depth: any occurrence of <tt>{-</tt> within the nested
comment starts a new nested comment, terminated by <tt>-}</tt>.  Within
a nested comment, each <tt>{-</tt> is matched by a corresponding
occurrence of <tt>-}</tt>.  In an ordinary comment, the character
sequences <tt>{-</tt> and <tt>-}</tt> have no special significance, and, in a
nested comment, the sequence <tt>--</tt> has no special significance.
Nested comments are used for compiler pragmas, as explained in
Appendix <a href="pragmas.html#pragmas">E</a>.<p>
If some code is commented out using a nested comment, then any
occurrence of <tt>{-</tt> or <tt>-}</tt> within a string or within an end-of-line
comment in that code will interfere with the nested comments.<a name="ids"></a><p>
<a name="sect2.3"></a>
<h3>2.3<tt>&nbsp;&nbsp;</tt>Identifiers and Operators</h3>
<p>
<table cellspacing=0 cellspacing=0>
<tr><td width=100></td><td width=20></td><td width=250></td></tr><tr><td>
varid </td><td>  <tt>-&gt;</tt> </td><td> (small {small | large | udigit | <tt>'</tt> | <tt>_</tt>})<sub>&lt;reservedid&gt;</sub>
</td></tr><tr><td>
conid </td><td>  <tt>-&gt;</tt> </td><td> large {small | large | udigit | <tt>'</tt> | <tt>_</tt>}
</td></tr><tr><td>
reservedid </td><td>  <tt>-&gt;</tt> </td><td> <tt>case</tt> | <tt>class</tt> | <tt>data</tt> | <tt>default</tt> | <tt>deriving</tt> | <tt>do</tt> | <tt>else
</tt></td></tr><tr><td>
</td><td> <tt>|</tt> </td><td> <tt>if</tt> | <tt>import</tt> | <tt>in</tt> | <tt>infix</tt> | <tt>infixl</tt> | <tt>infixr</tt> | <tt>instance
</tt></td></tr><tr><td>
</td><td> <tt>|</tt> </td><td> <tt>let</tt> | <tt>module</tt> | <tt>newtype</tt> | <tt>of</tt> | <tt>then</tt> | <tt>type</tt> | <tt>where
</tt></td></tr><tr><td>
specialid </td><td>  <tt>-&gt;</tt> </td><td> <tt>as</tt> | <tt>qualified</tt> | <tt>hiding
</tt></td></tr></table>
An identifier consists of a letter followed by zero or more letters,
digits, underscores, and single quotes.  Identifiers are lexically
distinguished into two classes: those that begin with a lower-case letter
(variable identifiers) and those that begin with an upper-case letter
(constructor identifiers).  Identifiers are case sensitive: <tt>name</tt>,
<tt>naMe</tt>, and <tt>Name</tt> are three distinct identifiers (the first two are
variable identifiers, the last is a constructor identifier).
Some identifiers, here indicated by <I>specialid</I>,
have special meanings in certain contexts but can be used as ordinary
identifiers.
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
varsym </td><td width=20>  <tt>-&gt;</tt> </td><td width=250> ( symbol {symbol | <tt>:</tt>})<sub>&lt;reservedop&gt;</sub>
</td></tr><tr><td>
consym </td><td>  <tt>-&gt;</tt> </td><td> (<tt>:</tt> {symbol | <tt>:</tt>})<sub>&lt;reservedop&gt;</sub>
</td></tr><tr><td>
reservedop </td><td>  <tt>-&gt;</tt> </td><td> <tt>..</tt> | <tt>::</tt> | <tt>=</tt> | <tt>\</tt> | <tt>|</tt> | <tt>&lt;-</tt> | <tt>-&gt;</tt> | <tt>@</tt> | <tt>~</tt> | <tt>=&gt;
</tt></td></tr><tr><td>
specialop </td><td>  <tt>-&gt;</tt> </td><td> <tt>-</tt> | <tt>!
</tt></td></tr></table>
<p>
Operator symbols are formed from one or more symbol characters, as
defined above, and are lexically distinguished into two classes: those
that start with a colon (constructors) and those that do not (functions).
Some operators, here indicated by <I>specialop</I>,
have special meanings in certain contexts but can be used as ordinary
operators.<p>
The sequence <tt>--</tt> immediately terminates a symbol; thus <tt>+--+</tt> parses
as the symbol <tt>+</tt> followed by a comment.<p>
Other than the special syntax for prefix negation, all operators are
infix, although each infix operator can be used in a 
<I>section</I> to yield partially applied operators (see
Section <a href="exps.html#sections">3.5</a>).
All of the standard infix operators are just
predefined symbols and may be rebound.  <p>
Although <tt>case</tt> is a reserved word, <tt>cases</tt> is not.
Similarly, although <tt>=</tt> is reserved, <tt>==</tt> and <tt>~=</tt> are
not.  At each point, the longest possible lexeme

is read, using a context-independent deterministic lexical analysis
(i.e. no lookahead beyond the current character is required).
Any kind of <I>whitespace</I> is also a proper delimiter for lexemes.<p>
In the remainder of the report six different kinds of 
names will be used:
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
varid </td><td width=20> </td><td width=250></td><td> (variables)
</td></tr><tr><td>
conid </td><td> </td><td></td><td> (constructors)
</td></tr><tr><td>
tyvar </td><td>  <tt>-&gt;</tt> </td><td>  varid	</td><td> (type variables)
</td></tr><tr><td>
tycon </td><td>  <tt>-&gt;</tt> </td><td>  conid 	</td><td> (type constructors)
</td></tr><tr><td>
tycls </td><td>  <tt>-&gt;</tt> </td><td>  conid 	</td><td> (type classes)
</td></tr><tr><td>
modid </td><td>  <tt>-&gt;</tt> </td><td>  conid	</td><td> (modules)
</td></tr></table>
Variables and type variables are represented by identifiers beginning
with small letters, and the other four by identifiers beginning with
capitals; also, variables and constructors have infix forms, the other
four do not.  Namespaces are also discussed in
Section <a href="intro.html#namespaces">1.4</a>.<p>

External names may optionally be <I>qualified</I> in certain
circumstances by prepending them with a module identifier.  This
applies to variable, constructor, type constructor and type class
names, but not type variables or module names.  Qualified
names are discussed in detail in Section <a href="modules.html#import">5.1.2</a>.
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
qvarid </td><td width=20>  <tt>-&gt;</tt> </td><td width=250> [modid <tt>.</tt>] varid
</td></tr><tr><td>
qconid </td><td>  <tt>-&gt;</tt> </td><td> [modid <tt>.</tt>] conid
</td></tr><tr><td>
qtycon </td><td>  <tt>-&gt;</tt> </td><td> [modid <tt>.</tt>] tycon
</td></tr><tr><td>
qtycls </td><td>  <tt>-&gt;</tt> </td><td> [modid <tt>.</tt>] tycls
</td></tr><tr><td>
qvarsym </td><td>  <tt>-&gt;</tt> </td><td> [modid <tt>.</tt>] varsym
</td></tr><tr><td>
qconsym </td><td>  <tt>-&gt;</tt> </td><td> [modid <tt>.</tt>] consym
</td></tr></table>
<a name="lexemes-numeric"></a><p>
<a name="sect2.4"></a>
<h3>2.4<tt>&nbsp;&nbsp;</tt>Numeric Literals</h3>
<p>
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
decimal </td><td width=20>  <tt>-&gt;</tt> </td><td width=250> digit{digit}
</td></tr><tr><td>
octal </td><td>  <tt>-&gt;</tt> </td><td> octit{octit}
</td></tr><tr><td>
hexadecimal </td><td>  <tt>-&gt;</tt> </td><td> hexit{hexit}
</td></tr></table>
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
integer </td><td width=20>  <tt>-&gt;</tt> </td><td width=250> decimal
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td>  <tt>0o</tt> octal | <tt>0O</tt> octal
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td>  <tt>0x</tt> hexadecimal | <tt>0X</tt> hexadecimal
</td></tr><tr><td>
float </td><td>  <tt>-&gt;</tt> </td><td> decimal <tt>.</tt> decimal[(<tt>e</tt> | <tt>E</tt>)[<tt>-</tt> | <tt>+</tt>]decimal]
</td></tr></table>
There are two distinct kinds of numeric literals: integer and
floating.  Integer literals may be given in decimal (the default),
octal (prefixed by <tt>0o</tt> or <tt>0O</tt>) or hexadecimal notation (prefixed by
<tt>0x</tt> or <tt>0X</tt>).
Floating literals are always decimal.
A floating literal must contain digits both before and after the
decimal point; this ensures that a decimal point cannot be mistaken
for another use of the dot character.  Negative numeric literals are
discussed in Section <a href="exps.html#operators">3.4</a>.  The typing of numeric literals
is discussed in Section <a href="basic.html#numeric-literals">6.3.1</a>.<a name="lexemes-char"></a><p>
<a name="sect2.5"></a>
<h3>2.5<tt>&nbsp;&nbsp;</tt>Character and String Literals</h3>


<p>
<table cellspacing=0 cellspacing=0>
<tr><td width=100>
char </td><td width=20>  <tt>-&gt;</tt> </td><td width=250>  <tt>'</tt> (graphic<sub>&lt;<tt>'</tt> | <tt>\</tt>&gt;</sub> | space | escape<sub>&lt;<tt>\&amp;</tt>&gt;</sub>) <tt>'
</tt></td></tr><tr><td>
string </td><td>  <tt>-&gt;</tt> </td><td>  <tt>"</tt> {graphic<sub>&lt;<tt>"</tt>  | <tt>\</tt>&gt;</sub> | space | escape | gap}<tt>"
</tt></td></tr><tr><td>
escape </td><td>  <tt>-&gt;</tt> </td><td>  <tt>\</tt> ( charesc | ascii | decimal | <tt>o</tt> octal | <tt>x</tt> hexadecimal )
</td></tr><tr><td>
charesc </td><td>  <tt>-&gt;</tt> </td><td> <tt>a</tt> | <tt>b</tt> | <tt>f</tt> | <tt>n</tt> | <tt>r</tt> | <tt>t</tt> | <tt>v</tt> | <tt>\</tt> | <tt>"</tt> | <tt>'</tt> | <tt>&amp;
</tt></td></tr><tr><td>
ascii </td><td>  <tt>-&gt;</tt> </td><td> <tt>^</tt>cntrl | <tt>NUL</tt> | <tt>SOH</tt> | <tt>STX</tt> | <tt>ETX</tt> | <tt>EOT</tt> | <tt>ENQ</tt> | <tt>ACK</tt> 
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td> <tt>BEL</tt> | <tt>BS</tt> | <tt>HT</tt> | <tt>LF</tt> | <tt>VT</tt> | <tt>FF</tt> | <tt>CR</tt> | <tt>SO</tt> | <tt>SI</tt> | <tt>DLE</tt> 
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td> <tt>DC1</tt> | <tt>DC2</tt> | <tt>DC3</tt> | <tt>DC4</tt> | <tt>NAK</tt> | <tt>SYN</tt> | <tt>ETB</tt> | <tt>CAN</tt> 
</td></tr><tr><td>
</td><td> <tt>|</tt> </td><td> <tt>EM</tt> | <tt>SUB</tt> | <tt>ESC</tt> | <tt>FS</tt> | <tt>GS</tt> | <tt>RS</tt> | <tt>US</tt> | <tt>SP</tt> | <tt>DEL
</tt></td></tr><tr><td>
cntrl </td><td>  <tt>-&gt;</tt> </td><td> ASClarge | @ | <tt>[</tt> | <tt>\</tt> | <tt>]</tt> | <tt>^</tt> | <tt>_
</tt></td></tr><tr><td>
gap </td><td>  <tt>-&gt;</tt> </td><td>  <tt>\</tt> whitechar {whitechar}<tt>\
</tt></td></tr></table>
<p>
Character literals are written between single quotes, as in
<tt>'a'</tt>, and strings between double quotes, as in <tt>"Hello"</tt>.<p>
Escape codes may be used in characters and strings to represent
special characters.  Note that a single quote <tt>'</tt> may be used in a string, but
must be escaped in a character; similarly, a double quote <tt>"</tt> may be used in a
character, but must be escaped in a string.  <tt>\</tt> must always be
escaped.  The category <I>charesc</I> also includes portable
representations for the characters "alert" (<tt>\a</tt>), "backspace"
(<tt>\b</tt>), "form feed" (<tt>\f</tt>), "new line" (<tt>\n</tt>), "carriage return"
(<tt>\r</tt>), "horizontal tab" (<tt>\t</tt>), and "vertical tab" (<tt>\v</tt>).<p>
Escape characters for the Unicode character
set, including
control characters such as <tt>\^X</tt>, are also provided.
Numeric escapes such as <tt>\137</tt> are used to designate the character
with decimal representation 137; octal
(e.g. <tt>\o137</tt>) and hexadecimal (e.g. <tt>\x37</tt>) representations are also
allowed.  Numeric escapes that are out-of-range of the Unicode standard
(16 bits) are an error.<p>
Consistent with the "consume longest lexeme" rule,

numeric escape
characters in strings consist of all consecutive digits and may
be of arbitrary length.  Similarly, the one ambiguous ASCII escape
code, <tt>"\SOH"</tt>, is parsed as a string of length 1.  The escape
character <tt>\&amp;</tt> is provided as a "null character" to allow strings
such as <tt>"\137\&amp;9"</tt> and <tt>"\SO\&amp;H"</tt> to be constructed (both of length
two).  Thus <tt>"\&amp;"</tt> is equivalent to <tt>""</tt> and the character
<tt>'\&amp;'</tt> is disallowed.  Further equivalences of characters
are defined in Section <a href="basic.html#characters">6.1.2</a>.<p>
A string may include a "gap"---two backslants enclosing
white characters---which is ignored.
This allows one to write long strings on more than one line by writing
a backslant at the end of one line and at the start of the next.  For
example,
<tt><br>

<br>
"Here&nbsp;is&nbsp;a&nbsp;backslant&nbsp;\\&nbsp;as&nbsp;well&nbsp;as&nbsp;\137,&nbsp;\<br>
&nbsp;&nbsp;&nbsp;&nbsp;\a&nbsp;numeric&nbsp;escape&nbsp;character,&nbsp;and&nbsp;\^X,&nbsp;a&nbsp;control&nbsp;character."<br>
<p>
</tt>String literals are actually abbreviations for lists of characters
(see Section <a href="exps.html#lists">3.7</a>).<p>
<hr><i>The Haskell 1.4 Report</i><br><a href="index.html">top</a> | <a href="intro.html">back</a> | <a href="exps.html">next</a> | <a href="index14.html">contents</a> | <a href="prelude-index.html">function index</a> <br><font size=2>March 27, 1997</font>
<p>
